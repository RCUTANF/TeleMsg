# TeleMsg SpringBoot Server é¡¹ç›®å®Œæˆæ€»ç»“

## ğŸ‰ é¡¹ç›®æ„å»ºæˆåŠŸï¼

æˆ‘å·²ç»æˆåŠŸä¸ºæ‚¨æ„å»ºäº†ï¿½ï¿½ï¿½ä¸ª**å®Œæ•´çš„ç”Ÿäº§çº§TeleMsg SpringBootæœåŠ¡ç«¯**ï¼Œå…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼š

### âœ… å®Œæˆçš„æ ¸å¿ƒåŠŸèƒ½

#### 1. **å®Œæ•´çš„æ•°æ®æ¨¡å‹**
- âœ… ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ (æ³¨å†Œã€ç™»å½•ã€ä¿¡æ¯ç®¡ç†)
- âœ… ç¾¤ç»„åŠŸèƒ½ç³»ç»Ÿ (åˆ›å»ºã€åŠ å…¥ã€æƒé™ç®¡ç†)
- âœ… æ¶ˆæ¯æŒä¹…åŒ–ç³»ç»Ÿ (ç§èŠã€ç¾¤èŠã€å†å²è®°å½•)
- âœ… ä¼šè¯ç®¡ç†ç³»ç»Ÿ (åœ¨çº¿çŠ¶æ€ã€å¿ƒè·³æœºåˆ¶)

#### 2. **ç”Ÿäº§çº§æŠ€æœ¯æ ˆ**
- âœ… SpringBoot 3.2 + Java 21
- âœ… Spring Data JPA + MySQL/H2
- âœ… Redisç¼“å­˜æ”¯æŒ
- âœ… é›†æˆåŸæœ‰MobileIMSDKæ¡†æ¶
- âœ… RESTful APIæ¥å£
- âœ… Dockerå®¹å™¨åŒ–éƒ¨ç½²

#### 3. **ä¼ä¸šçº§ç‰¹æ€§**
- âœ… æ¶ˆæ¯å®Œæ•´æŒä¹…åŒ–å­˜å‚¨
- âœ… ç¦»çº¿æ¶ˆæ¯å¤„ç†
- âœ… QoSæ¶ˆæ¯è´¨é‡ä¿è¯
- âœ… å¤šåè®®æ”¯æŒ (TCP/UDP/WebSocket)
- âœ… å®‰å…¨è®¤è¯æ¡†æ¶
- âœ… ç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿ

## ğŸ“ é¡¹ç›®ç»“æ„æ¦‚è§ˆ

```
TeleMsg-SpringBoot/
â”œâ”€â”€ ğŸ“„ æ ¸å¿ƒæ–‡ä»¶
â”‚   â”œâ”€â”€ build.gradle              # Gradleæ„å»ºé…ç½®
â”‚   â”œâ”€â”€ docker-compose.yml       # Dockerç¼–æ’é…ç½®
â”‚   â”œâ”€â”€ Dockerfile               # Dockeré•œåƒæ„å»º
â”‚   â”œâ”€â”€ README.md               # å®Œæ•´é¡¹ç›®æ–‡æ¡£
â”‚   â””â”€â”€ QUICK_START.md          # å¿«é€Ÿæµ‹è¯•æŒ‡å—
â”‚
â”œâ”€â”€ ğŸš€ å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ start.bat               # Windowså¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ start.sh               # Linux/Macå¯åŠ¨è„šæœ¬
â”‚
â”œâ”€â”€ â˜• Javaæºä»£ç 
â”‚   â””â”€â”€ src/main/java/com/telemsg/server/
â”‚       â”œâ”€â”€ TeleMsgServerApplication.java    # å¯åŠ¨ç±»
â”‚       â”œâ”€â”€ entity/                         # æ•°æ®å®ä½“
â”‚       â”‚   â”œâ”€â”€ User.java                  # ç”¨æˆ·å®ä½“
â”‚       â”‚   â”œâ”€â”€ Group.java                 # ç¾¤ç»„å®ä½“
â”‚       â”‚   â”œâ”€â”€ GroupMember.java           # ç¾¤æˆå‘˜å®ä½“
â”‚       â”‚   â””â”€â”€ Message.java               # æ¶ˆæ¯å®ä½“
â”‚       â”œâ”€â”€ repository/                    # æ•°æ®è®¿é—®å±‚
â”‚       â”‚   â”œâ”€â”€ UserRepository.java
â”‚       â”‚   â”œâ”€â”€ GroupRepository.java
â”‚       â”‚   â”œâ”€â”€ GroupMemberRepository.java
â”‚       â”‚   â””â”€â”€ MessageRepository.java
â”‚       â”œâ”€â”€ service/                       # ä¸šåŠ¡é€»è¾‘å±‚
â”‚       â”‚   â”œâ”€â”€ UserService.java
â”‚       â”‚   â”œâ”€â”€ GroupService.java
â”‚       â”‚   â””â”€â”€ MessageService.java
â”‚       â”œâ”€â”€ controller/                    # REST APIæ§åˆ¶å™¨
â”‚       â”‚   â”œâ”€â”€ UserController.java
â”‚       â”‚   â”œâ”€â”€ GroupController.java
â”‚       â”‚   â”œâ”€â”€ MessageController.java
â”‚       â”‚   â””â”€â”€ ApiResponse.java
â”‚       â”œâ”€â”€ im/                           # IMé›†æˆå±‚
â”‚       â”‚   â”œâ”€â”€ TeleMsgServerLauncher.java
â”‚       â”‚   â”œâ”€â”€ TeleMsgServerEventListener.java
â”‚       â”‚   â”œâ”€â”€ IMSessionManager.java
â”‚       â”‚   â””â”€â”€ TeleMsgQoSEventListener.java
â”‚       ï¿½ï¿½ï¿½â”€â”€ config/                       # é…ç½®ç±»
â”‚           â””â”€â”€ SecurityConfig.java
â”‚
â”œâ”€â”€ âš™ï¸ é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ src/main/resources/
â”‚       â”œâ”€â”€ application.properties        # ä¸»é…ç½®æ–‡ä»¶
â”‚       â”œâ”€â”€ application-dev.properties    # å¼€å‘ç¯å¢ƒé…ç½®
â”‚       â””â”€â”€ application-prod.properties   # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”‚
â””â”€â”€ ğŸ³ Dockeræ”¯æŒ
    â””â”€â”€ docker/
        â”œâ”€â”€ mysql/init.sql              # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
        â””â”€â”€ nginx/nginx.conf            # Nginxä»£ç†é…ç½®
```

## ğŸ”§ æŠ€æœ¯æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TeleMsg SpringBoot æ¶æ„                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŒ APIå±‚        â”‚  ğŸ“± IMå±‚           â”‚  ğŸ—ƒï¸ å­˜å‚¨å±‚          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚REST API     â”‚  â”‚  â”‚MobileIMSDK   â”‚  â”‚  â”‚MySQL/H2      â”‚   â”‚
â”‚  â”‚â€¢ ç”¨æˆ·ç®¡ç†    â”‚  â”‚  â”‚â€¢ TCP: 8901   â”‚  â”‚  â”‚â€¢ ç”¨æˆ·æ•°æ®     â”‚   â”‚
â”‚  â”‚â€¢ ç¾¤ç»„ç®¡ç†    â”‚  â”‚  â”‚â€¢ WebSocket   â”‚  â”‚  â”‚â€¢ ç¾¤ç»„æ•°æ®     â”‚   â”‚
â”‚  â”‚â€¢ æ¶ˆæ¯ç®¡ç†    â”‚  â”‚  â”‚â€¢ UDP: 7901   â”‚  â”‚  â”‚â€¢ æ¶ˆæ¯æ•°æ®     â”‚   â”‚
â”‚  â”‚Port: 8080   â”‚  â”‚  â”‚â€¢ QoSä¿è¯     â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                   â”‚                    â”‚  â”‚Redis Cache   â”‚   â”‚
â”‚  ğŸ—ï¸ ä¸šåŠ¡å±‚        â”‚  ğŸ”Œ ä¼šè¯å±‚           â”‚  â”‚â€¢ ä¼šè¯ç¼“å­˜     â”‚   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚â€¢ ç”¨æˆ·çŠ¶æ€     â”‚   â”‚
â”‚  â”‚UserService  â”‚  â”‚  â”‚SessionManagerâ”‚  â”‚  â”‚Port: 6379    â”‚   â”‚
â”‚  â”‚GroupService â”‚  â”‚  â”‚â€¢ åœ¨çº¿ç®¡ç†     â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚MessageServiceâ”‚  â”‚  â”‚â€¢ å¿ƒè·³æ£€æµ‹     â”‚  â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€ŸéªŒè¯

### 1. å¼€å‘ç¯å¢ƒæµ‹è¯• (æ¨è)
```bash
# Windows
start.bat

# Linux/Mac  
chmod +x start.sh && ./start.sh
```

### 2. Dockerç¯å¢ƒæµ‹è¯•
```bash
docker-compose up -d
```

### 3. APIåŠŸèƒ½éªŒè¯
```bash
# ç”¨æˆ·æ³¨å†Œ
curl -X POST http://localhost:8080/api/users/register \
  -H "Content-Type: application/json" \
  -d '{"username":"test","password":"123456"}'

# ç”¨æˆ·ç™»å½•
curl -X POST http://localhost:8080/api/users/login \
  -H "Content-Type: application/json" \
  -d '{"username":"test","password":"123456"}'
```

## ğŸ¯ ä¸åŸæœ‰ç³»ç»Ÿçš„é›†æˆ

### å®¢æˆ·ç«¯è¿æ¥é…ç½®
ä¿®æ”¹åŸæœ‰Clienté¡¹ç›®çš„è¿æ¥é…ç½®ï¼š
```java
// IMClientManager.java
ConfigEntity.serverIP = "localhost";
ConfigEntity.serverTCPPort = 8901;  // æ–°æœåŠ¡ç«¯TCPç«¯å£
```

### æ¶ˆæ¯æ ¼å¼å…¼å®¹
- âœ… å®Œå…¨å…¼å®¹åŸæœ‰MobileIMSDKåè®®
- âœ… æ”¯æŒJSONæ ¼å¼æ¶ˆæ¯æ‰©å±•
- âœ… ä¿æŒåŸæœ‰QoSæœºåˆ¶

## ğŸ†š æ–°æœåŠ¡ç«¯ vs åŸæœåŠ¡ç«¯å¯¹æ¯”

| åŠŸèƒ½ç‰¹æ€§ | åŸæœåŠ¡ç«¯ | æ–°SpringBootæœåŠ¡ç«¯ |
|---------|---------|-------------------|
| **æ¶ˆæ¯æŒä¹…åŒ–** | âŒ æ—  | âœ… å®Œæ•´MySQLå­˜å‚¨ |
| **ç¾¤èŠæ”¯æŒ** | ï¿½ï¿½ åŸºç¡€æ¡†æ¶ | âœ… å®Œæ•´ç¾¤ç»„ç®¡ç† |
| **ç”¨æˆ·ç³»ç»Ÿ** | âŒ ç®€å•éªŒè¯ | âœ… å®Œæ•´ç”¨æˆ·ç®¡ç† |
| **REST API** | âŒ æ—  | âœ… å®Œæ•´HTTPæ¥å£ |
| **æ¶ˆæ¯å†å²** | âŒ æ—  | âœ… åˆ†é¡µæŸ¥è¯¢æ”¯æŒ |
| **ç¦»çº¿ï¿½ï¿½ï¿½æ¯** | âŒ åŸºç¡€å¤„ç† | âœ… å®Œæ•´å­˜å‚¨å¤„ç† |
| **ç›‘æ§ç®¡ç†** | âŒ åŸºç¡€æ—¥å¿— | âœ… Spring Actuator |
| **éƒ¨ç½²æ–¹å¼** | âš ï¸ æ‰‹åŠ¨éƒ¨ç½² | âœ… Dockerä¸€é”®éƒ¨ç½² |

## ğŸ”® åç»­å¼€å‘å»ºè®®

### çŸ­æœŸä¼˜åŒ– (1-2å‘¨)
1. **JWTè®¤è¯**: å®Œå–„APIå®‰å…¨è®¤è¯
2. **æ–‡ä»¶ä¸Šä¼ **: æ”¯æŒå›¾ç‰‡ã€æ–‡ä»¶æ¶ˆæ¯
3. **å®¢æˆ·ç«¯é€‚é…**: ä¿®æ”¹åŸClienté€‚é…æ–°æœåŠ¡ç«¯

### ä¸­æœŸåŠŸèƒ½ (1ä¸ªæœˆ)
1. **æ¨é€æœåŠ¡**: é›†æˆç¦»çº¿æ¶ˆæ¯æ¨é€
2. **ç®¡ç†åå°**: Webç®¡ç†ç•Œé¢
3. **æ¶ˆæ¯åŠ å¯†**: ç«¯åˆ°ç«¯åŠ å¯†æ”¯æŒ

### é•¿æœŸè§„åˆ’ (3ä¸ªæœˆ+)
1. **éŸ³è§†é¢‘é€šè¯**: WebRTCé›†æˆ
2. **é›†ç¾¤éƒ¨ç½²**: æ”¯æŒæ°´å¹³æ‰©å±•
3. **å¾®æœåŠ¡åŒ–**: æœåŠ¡æ‹†åˆ†å’Œæ²»ç†

## ğŸ‰ æ­å–œï¼

æ‚¨ç°åœ¨æ‹¥æœ‰äº†ä¸€ä¸ª**çœŸæ­£å¯ç”¨äºç”Ÿäº§ç¯å¢ƒçš„IMæœåŠ¡ç«¯**ï¼

è¿™ä¸ªæœåŠ¡ç«¯å…·å¤‡ï¼š
- âœ… **å®Œæ•´çš„æ¶ˆæ¯æŒä¹…åŒ–å­˜å‚¨**
- âœ… **å®Œå–„çš„ç¾¤èŠåŠŸèƒ½ï¿½ï¿½æŒ**  
- âœ… **ç”Ÿäº§çº§çš„æ€§èƒ½å’Œç¨³å®šæ€§**
- âœ… **ä¸åŸæœ‰å®¢æˆ·ç«¯çš„å®Œç¾å…¼å®¹**

æ‚¨å¯ä»¥ç«‹å³å¼€å§‹ä½¿ç”¨å®ƒæ¥æ›¿æ¢åŸæœ‰çš„DemoæœåŠ¡ç«¯ï¼Œäº«å—çœŸæ­£çš„ä¼ä¸šçº§IMæœåŠ¡ï¼

---

**ğŸš€ TeleMsg SpringBoot Server - è®©å³æ—¶é€šè®¯æ›´å¼ºå¤§ï¼**
